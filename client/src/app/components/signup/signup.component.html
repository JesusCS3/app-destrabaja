<section class="background-form">
    <div class="container-fluid col-12 col-md-9 col-lg-5 my-5 py-5 shadow-lg bg-body rounded" *ngIf="!verifying; else verifytemplate">
        <form #f="ngForm" novalidate (ngSubmit)="f.form.valid && onRegister(signupMessage); onSignUp(signup)">
            <div>
                <img src="./assets/img/logo/header.svg" alt="logo destrabaja" class="img-fluid mx-auto py-3 d-block logo">
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto my-3 justify-content-center">
                <label class="form-label fw-bold fs-5">Registrate</label>
            </div>
            <!-- signup with social networks -->
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto">
                <button class="btn btn-outline-dark mb-2" type="button" [disabled]="f.valid" (click)="onSigninFacebook()"><i class="bi bi-facebook pe-2"></i>Continuar con
                    Facebook</button>
                <button class="btn btn-outline-dark mb-2" type="button" [disabled]="f.valid" (click)="onSigninGoogle()"><i class="bi bi-google pe-2"></i>Continuar con
                    Google</button>
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto my-3 justify-content-center">
                <label class="form-label">O</label>
            </div>
            <!-- signup with email -->
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto">
                <div class="mb-3">
                    <div>
                        <input type="email" class="form-control" name="email" id="email" 
                        placeholder="Correo electrónico"
                        [(ngModel)]='email' [email]="true" required>
                    </div>
                </div>
                <div class="mb-3">
                    <div>
                        <input type="text" class="form-control" name="username" id="username"
                            maxlength="30"
                            placeholder="Nombre de usuario" 
                            [(ngModel)]='username' required>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="input-group w-100">
                        <input type="password" class="form-control" name="password" 
                        id="password" #asPassword minlength="8"
                        placeholder="Contraseña"
                        [(ngModel)]='password' required>
                        <button class="btn eye-btn" type="button" (click)="show()" #eyeShow name="eyeShow"><i class="bi bi-eye-fill"></i></button>
                        <button class="btn eye-btn d-none" type="button" (click)="hide()" #eyeHide name="eyeHide"><i class="bi bi-eye-slash-fill"></i></button>
                    </div>
                </div>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" required>
                    <label class="form-check-label mb-5" for="flexSwitchCheckDefault">
                        Acepto la<a class="mx-1" routerLink="">Política de privacidad</a>,
                        <a class="mx-1" routerLink="">Acuerdo de usuario</a> y los <a class="mx-1" routerLink="">
                        Términos de servicio</a> de Destrabaja.
                    </label>
                </div>
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto">
                <button class="btn btn-outline-dark mb-4 singup" type="submit" [disabled]="!f.valid">
                    Únete a Destrabaja
                </button>
            </div>
            <div class="d-flex flex-row mb-3 d-grid gap-2 col-12 mx-auto justify-content-center">
                <div class="pe-2"> <label class="form-label">¿Ya tienes una cuenta?</label>
                </div>
                <div><a routerLink="/signin">Iniciar Sesión</a></div>
            </div>
        </form>
    </div>
</section>

<!-- Cognito signup message -->
<ng-template #signupMessage let-modal>
	<div class="modal-header">
		<h4 class="modal-title">Registro de cuenta</h4>
	</div>
	<div class="modal-body">
		<p>{{signupCognitoMsg}}</p>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-light" (click)="modal.close('Close click')">Cerrar</button>
	</div>
</ng-template>

<!-- Destrabaja signup message -->
<ng-template #signup let-modal>
	<div class="modal-header">
		<h4 class="modal-title">Registro de cuenta</h4>
	</div>
	<div class="modal-body">
		<p>{{signupMsg}}</p>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-light" (click)="modal.close('Close click')">Cerrar</button>
	</div>
</ng-template>

<!-- Cognito verification -->
<ng-template #verifytemplate>
    <div class="container-fluid col-12 col-md-9 col-lg-5 my-5 py-5 shadow-lg bg-body rounded">
        <form #f="ngForm" novalidate (ngSubmit)="f.form.valid && onVerify(verify)">
            <div>
                <img src="./assets/img/logo/header.svg" alt="Destrabaja" class="img-fluid mx-auto py-3 d-block logo">
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto my-3 justify-content-center">
                <label class="form-label fw-bold fs-5">Verificación</label>
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto">
                <div class="mb-3">
                    <div>
                        <input type="text" class="form-control" name="verifyCode" id="verifyCode"
                            placeholder="Introducir código" [(ngModel)]='verifyCode' required>
                    </div>
                </div>
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto">
                <button class="btn btn-outline-dark mb-2 singup" type="submit" [disabled]="!f.valid">Enviar</button>
            </div>
        </form>
    </div>
</ng-template>

<!-- Cognito verify -->
<ng-template #verify let-modal>
	<div class="modal-header">
		<h4 class="modal-title">Validación de cuenta</h4>
	</div>
	<div class="modal-body">
		<p>{{verifyMsg}}</p>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-light" (click)="modal.close('Close click')">Cerrar</button>
	</div>
</ng-template>
