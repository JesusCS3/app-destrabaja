<section class="background-form">
    <div class="container-fluid col-12 col-md-9 col-lg-5 my-5 py-5 shadow-lg bg-body rounded" *ngIf="!verifying; else verifytemplate">
        <form #f="ngForm" novalidate (ngSubmit)="f.form.valid && onSigninCognito(signinMessage);onSignin(signin)">
            <div>
                <img src="./assets/img/logo/header.svg" alt="Destrabaja" class="img-fluid mx-auto py-3 d-block logo">
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto my-3 justify-content-center">
                <label class="form-label fw-bold fs-5">Bienvenido</label>
            </div>
            <!-- signin with social networks -->
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto">
                <button class="btn btn-outline-dark mb-2" type="button" [disabled]="f.valid" (click)="onSigninFacebook()"><i class="bi bi-facebook pe-2"></i>Iniciar sesión
                    con Facebook</button>
                <button class="btn btn-outline-dark mb-2" type="button" [disabled]="f.valid" (click)="onSigninGoogle()"><i class="bi bi-google pe-2"></i>Iniciar sesión con
                    Google</button>
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto my-3 justify-content-center">
                <label class="form-label">O</label>
            </div>
            <!-- signin with email -->
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto">
                <div class="mb-3">
                    <div>
                        <input type="email" class="form-control" id="email" name="email" 
                            [(ngModel)]='email' [email]="true" 
                            placeholder="Correo electrónico" required>
                    </div>
                </div>
                <div class="mb-3">
                    <div class="input-group w-100">
                        <input type="password" class="form-control" id="password" name="password" 
                        #asPassword minlength="8"
                        [(ngModel)]='password' required
                        placeholder="Contraseña">
                        <button class="btn eye-btn" type="button" (click)="show()" #eyeShow name="eyeShow"><i class="bi bi-eye-fill"></i></button>
                        <button class="btn eye-btn d-none" type="button" (click)="hide()" #eyeHide name="eyeHide"><i class="bi bi-eye-slash-fill"></i></button>
                    </div>
                </div>
                <div class="form-check form-switch d-flex flex-row">
                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
                    <label class="form-check-label mb-4 px-2" for="flexSwitchCheckDefault">Recordarme</label>
                </div>
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto">
                <button class="btn btn-outline-dark mb-4 login" type="submit" name="singinbutton" [disabled]="!f.valid">Ingresar</button>
            </div>
            <div class="d-flex flex-row justify-content-center mb-3"><a routerLink="/forgotten-password">¿Has olvidado tu contraseña?</a></div>
            <div class="d-flex flex-row mb-3 d-grid gap-2 col-12 mx-auto justify-content-center">
                <div class="pe-2"> <label class="form-label">¿No tienes una cuenta?</label></div>
                <div><a routerLink="/signup">Regístrate</a></div>
            </div>
        </form>
    </div>
</section>

<!-- Cognito signin message -->
<ng-template #signinMessage let-modal>
	<div class="modal-header">
		<h4 class="modal-title">Inicio de sesión</h4>
	</div>
	<div class="modal-body">
		<p>{{signinCognitoMsg}}</p>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-light" (click)="modal.close('Close click')">Cerrar</button>
	</div>
</ng-template>

<!-- Cognito verification -->
<ng-template #verifytemplate>
    <div class="container-fluid col-12 col-md-9 col-lg-5 my-5 py-5 shadow-lg bg-body rounded">
        <form #f="ngForm" novalidate (ngSubmit)="f.form.valid && onVerify(signinMessage)">
            <div>
                <img src="./assets/img/logo/header.svg" alt="Destrabaja" class="img-fluid mx-auto py-3 d-block logo">
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto my-3 justify-content-center">
                <label class="form-label fw-bold fs-5">Verificación</label>
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto">
                <div class="mb-3">
                    <div>
                        <input type="text" class="form-control" name="verifyCode" id="verifyCode"
                            placeholder="Introducir código" [(ngModel)]='verifyCode' required>
                    </div>
                </div>
            </div>
            <div class="d-grid gap-2 col-9 col-md-8 col-lg-8 mx-auto">
                <button class="btn btn-outline-dark mb-2 singup" type="submit" [disabled]="!f.valid">Enviar</button>
            </div>
        </form>
    </div>
</ng-template>

<!-- Destrabaja signin message -->
<ng-template #signin let-modal>
	<div class="modal-header">
		<h4 class="modal-title">Inicio de sesión</h4>
	</div>
	<div class="modal-body">
		<p>{{signinMsg}}</p>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-light" (click)="modal.close('Close click')">Cerrar</button>
	</div>
</ng-template>